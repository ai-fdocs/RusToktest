# leptos-auth

## Назначение
`leptos-auth` — библиотека аутентификации и авторизации для фронтенд-приложений на Leptos.

## Что делает
- Управляет токенами аутентификации в локальном хранилище браузера.
- Предоставляет контекст аутентификации для компонентов Leptos.
- Реализует защищённые маршруты (требующие авторизации).
- Обрабатывает вход/выход пользователя.
- Хранит информацию о сессии и текущем тенанте.

## Как работает (простыми словами)
1. При входе пользователя токен сохраняется в `localStorage`.
2. Компоненты получают доступ к контексту аутентификации через хуки.
3. Защищённые маршруты проверяют наличие токена перед рендерингом.
4. При выходе токен удаляется, контекст обновляется.
5. При ошибке 401 происходит автоматический редирект на страницу входа.

## Ключевые компоненты
- `components/` — React-компоненты для защиты маршрутов (`ProtectedRoute`, `GuestRoute`, `RequireAuth`).
- `context/` — Leptos-контекст для хранения состояния аутентификации.
- `hooks/` — хуки для работы с аутентификацией (`use_auth`, `use_login`, `use_logout`).
- `storage/` — абстракция над `gloo-storage` для работы с `localStorage`.

## Кому нужен
Для всех фронтенд-приложений на Leptos, требующих аутентификации:
- `apps/admin` — административная панель.
- Потенциально `apps/storefront` — витрина магазина.

This is an alpha version and requires clarification. Be careful, there may be errors in the text. So that no one thinks that this is an immutable rule.

## Взаимодействие
- crates/leptos-graphql (для GraphQL API)
- apps/admin

## Документация
- Локальная документация: `./docs/`
- Общая документация платформы: `/docs`

## Паспорт компонента
- **Роль в системе:** Аутентификация и авторизация для Leptos-приложений.
- **Основные данные/ответственность:** управление токенами, защита маршрутов, контекст auth.
- **Взаимодействует с:**
  - crates/leptos-graphql
  - apps/admin
- **Точки входа:**
  - `crates/leptos-auth/src/lib.rs`
- **Локальная документация:** `./docs/`
- **Глобальная документация платформы:** `/docs/`
